(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{6272:function(e,l,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categorySingl/[slug]",function(){return i(5432)}])},8232:function(e,l,i){"use strict";var s=i(5893),t=i(1664),n=i.n(t),c=i(7294);l.Z=function(e){let{title:l,links:i}=e;return(0,s.jsx)("div",{className:"brendcrumbs",children:(0,s.jsxs)("div",{className:"brendcrumbs__container _container",children:[(0,s.jsx)(n(),{href:"/",children:"Главная"}),(0,s.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})}),(null==i?void 0:i.length)?i.map((e,l)=>(0,s.jsxs)(c.Fragment,{children:[(0,s.jsx)(n(),{href:e.link,children:e.name}),(0,s.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})})]},l)):"",(0,s.jsx)("p",{children:l})]})})}},556:function(e,l,i){"use strict";i.d(l,{Z:function(){return r}});var s=i(5893),t=i(1664),n=i.n(t);i(7294);var c=i(5007),a=i(1936);function r(e){let{title:l,img:i,id:t,slug:r}=e,d=(0,c.I0)();return(0,s.jsxs)("div",{className:"category-item",children:[(0,s.jsx)(n(),{href:"/categorySingl/".concat(r),onClick:()=>{d((0,a.th)({categorySlug:r,limit:20})),d((0,a.kZ)({categoryId:t,limit:20}))},className:"category-item__img",children:(0,s.jsx)("img",{src:i,alt:l})}),(0,s.jsx)("h3",{children:(0,s.jsx)(n(),{href:"/categorySingl/".concat(r),onClick:()=>{d((0,a.th)({categorySlug:r,limit:20})),d((0,a.kZ)({categoryId:t,limit:20}))},children:l})})]})}},1449:function(e,l,i){"use strict";var s=i(5893);i(7294),l.Z=function(){return(0,s.jsxs)("div",{className:"load-screen",id:"load-screen",children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]})}},564:function(e,l,i){"use strict";var s=i(5893),t=i(9184),n=i(9633),c=i(4687),a=i(7066),r=i(7294),d=i(5007);l.Z=function(){let{loginData:e}=(0,d.v9)(n.YN),[l,i]=(0,r.useState)("Забронируйте инструмент заранее, и мы отложим их специально для вас! Бронь будет действительна в течение 24 часов."),[o,u]=(0,r.useState)(!0),{preOrderData:h}=(0,d.v9)(t.nR),x=(0,d.I0)();return(0,r.useEffect)(()=>{},[h]),(0,s.jsx)("div",{className:"preorder-modal",children:(0,s.jsxs)("div",{className:"preorder-modal__container",children:[(0,s.jsxs)("div",{className:"preorder-modal__title",children:[(0,s.jsx)("h2",{children:"Забронировать"}),(0,s.jsx)("button",{onClick:()=>x((0,t.gW)()),children:(0,s.jsx)(c.Nn,{})})]}),(0,s.jsxs)("div",{className:"preorder-modal__body",children:[(0,s.jsx)("p",{children:l}),(0,s.jsx)("button",{onClick:()=>{o?a.Z.post("http://api.calcarela.com/api/auth/pre-order/".concat(h.id),{},{headers:{Authorization:"Bearer "+e.access_token}}).then(e=>{200===e.status&&(i("Спасибо! Ваша заявка принята, скоро мы с Вами свяжемся!"),u(!1),setTimeout(()=>{x((0,t.gW)())},5e3))}):x((0,t.gW)())},children:o?"Забронировать":"Закрыть"})]})]})})}},1918:function(e,l,i){"use strict";var s=i(5893),t=i(7294),n=i(5007),c=i(1664),a=i.n(c),r=i(7741),d=i(9633),o=i(9314),u=i(1935),h=i(4687),x=i(3308),g=i(9184),m=i(796),j=i(1163);l.Z=(0,t.memo)(function(e){let{title:l,img:i,price:c,salePrice:v,id:p,slug:_,total:f,book:N}=e,k=(0,n.I0)(),b=(0,t.useRef)(null),[w,C]=(0,t.useState)(!1),y=(0,j.useRouter)(),{loginData:I}=(0,n.v9)(d.YN),{uuId:S}=(0,n.v9)(x.aQ),{guestUserId:Z}=(0,n.v9)(m.KY),F=(0,t.useCallback)(()=>{k((0,r.HC)({productCount:"1",productId:p,userToken:I.access_token?I.access_token:null,guestUserId:Z})),C(!0),setTimeout(()=>{C(!1)},1e3)},[Z]),L=(0,t.useCallback)(()=>{k((0,u.Dq)({userToken:I.access_token,productId:p,guestUserId:!!S&&S})),C(!0),setTimeout(()=>{C(!1)},1e3),console.log(f>N.length)},[S]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"product-item",children:[(0,s.jsxs)(a(),{href:"/product/".concat(_),style:{backgroundImage:i&&"url("+i+")"},className:"product-item__img",onClick:()=>{k((0,o.Rc)({slug:_}))},scroll:!1,children:[v>0&&(0,s.jsxs)("div",{className:"discount_div",children:["- ",100-100*v/c," %"]}),(0,s.jsx)("img",{src:i,alt:l})]}),(0,s.jsxs)("div",{className:"product-item__text",children:[(0,s.jsx)("h4",{children:(0,s.jsx)(a(),{href:"/product/".concat(_),onClick:()=>{k((0,o.Rc)({slug:_}))},scroll:!1,title:l,children:l})}),(0,s.jsx)("div",{className:"product-item__prices",children:v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:[v," ₽"]}),(0,s.jsxs)("span",{children:[c," ₽"]})]}):(0,s.jsxs)("p",{children:[c," ₽"]})}),(0,s.jsx)(a(),{href:"/",className:"credit-btn",children:"Оформить кредит в магазине!"}),(0,s.jsxs)("div",{className:"product-item__buttons",children:[(0,s.jsx)("button",{onClick:F,className:"buy-btn",disabled:(null==N?void 0:N.length)>=f,style:{maxWidth:(null==N?void 0:N.length)>=f&&"unset",backgroundColor:(null==N?void 0:N.length)>=f&&"#939393"},children:(null==N?void 0:N.length)>=f?"Забронировано":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.wh,{color:"#FFF"}),"Купить",w&&(0,s.jsx)("span",{className:"product-item__animate",ref:b,children:"1"})]})}),"/liked"!==y.pathname?(0,s.jsx)("button",{className:"like-btn",onClick:L,children:(0,s.jsx)(h.lM,{})}):(0,s.jsx)("button",{className:"like-btn",onClick:()=>{k((0,u.ns)({userToken:I.access_token,productId:p,guestUserId:S}))},children:(0,s.jsx)(h.yl,{})}),(null==N?void 0:N.length)>=f?"":(0,s.jsx)("button",{className:"preorder-btn",onClick:()=>{I.access_token?k((0,g.gW)({id:p,price:v||c,name:l,toggle:!0})):y.push("/login")},children:(0,s.jsx)(h.fC,{})})]})]})]})})})},6646:function(e,l,i){"use strict";var s=i(5893),t=i(7294),n=i(2261);i(4276);var c=i(1918),a=i(5007),r=i(1704),d=i(1753);l.Z=(0,t.memo)(function(e){let{idx:l,fetch:i}=e,{getTags:o,tagsData:u}=(0,a.v9)(r.a0),h=(0,a.I0)();return(0,t.useEffect)(()=>{u.length<1&&!o&&(h((0,r.Y8)()),h((0,d.$)({limit:20,fetch:i})))},[u]),(0,s.jsx)(s.Fragment,{children:u.length?(0,s.jsx)("section",{className:"products",children:(0,s.jsxs)("div",{className:"products__container _container",children:[(0,s.jsx)("div",{className:"section-title",children:(0,s.jsx)("h2",{children:u[l].title})}),(0,s.jsx)("div",{className:"products__swiper",children:(0,s.jsx)(n.tq,{slidesPerView:"auto",loop:u[l].products.length>16,className:"swiper",children:u[l].products.map(e=>(0,s.jsx)(n.o5,{className:"swiper-slide",children:(0,s.jsx)(c.Z,{title:(null==e?void 0:e.title)&&e.title,img:(null==e?void 0:e.image)&&"http://api.calcarela.com"+(null==e?void 0:e.image),price:null==e?void 0:e.price,salePrice:(null==e?void 0:e.special_price)!==0&&(null==e?void 0:e.special_price),slug:null==e?void 0:e.slug,id:e.id,book:e.book,total:e.quantity})},null==e?void 0:e.id))})})]})}):""})})},5432:function(e,l,i){"use strict";i.r(l),i.d(l,{default:function(){return N}});var s=i(5893),t=i(7294),n=i(5007),c=i(3595),a=i(1936),r=i(4687),d=function(e){let{title:l,values:i,id:d,prices:o,filterDataArray:u,setFilterDataArray:h,toggleMobileFillters:x}=e,[g,m]=(0,t.useState)(),j=(0,n.I0)(),{singleCategoryData:v}=(0,n.v9)(c.uY);return(0,s.jsxs)("div",{className:"catalog-single__filter-item",children:[(0,s.jsxs)("div",{className:"catalog-single__filter-title",onClick:()=>m(!g),children:[(0,s.jsx)("p",{children:l}),(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(r.K5,{color:"#FFF",active:g})})]}),g&&(0,s.jsx)("div",{className:"catalog-single__filter-hiden",children:(0,s.jsx)("ul",{children:i.map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"checkbox",children:[(0,s.jsx)("input",{type:"checkbox",onClick:l=>{var i,s,t;i=e.id,s=e.value,t=e.toggle,j((0,c.ld)({attributeId:d,valueId:i})),t?(h([...u.filter(e=>e[d]!==s)]),u.filter(e=>e[d]!==s).length?j((0,a.ST)({filterData:[...u.filter(e=>e[d]!==s),{9999:[...o]}],categoryId:v.id,limit:20})):j((0,c.LP)())):(h([...u.filter(e=>e[d]!==s),{[d]:s}]),j((0,a.ST)({filterData:[...u,{[d]:s},{9999:[...o]}],categoryId:v.id,limit:20}))),x(!1)}}),(0,s.jsx)("span",{className:"checkbox-span"}),(0,s.jsx)("p",{children:e.value})]})},e.id))})})]})},o=i(1918);i(9332);var u=i(1449),h=i(7311),x=i(556),g=i(8232),m=i(1163),j=i(1704);i(1753);var v=function(e){var l,i,v,p,_,f,N;let{slug:k}=e,[b,w]=(0,t.useState)(!1),[C,y]=(0,t.useState)(!1),[I,S]=(0,t.useState)(!1),[Z,F]=(0,t.useState)(!1),[L,T]=(0,t.useState)(30),M=(0,n.I0)(),{singleCategoryData:E,singleCategoryChildrenData:P,categoryFiltersData:R,prices:W,filterBrands:B}=(0,n.v9)(c.uY),{sortTagsData:V}=(0,n.v9)(j.a0),Y=(0,m.useRouter)(),D=(0,t.useRef)(null),[q,K]=(0,t.useState)([]),U=e=>{e&&e.preventDefault(),M((0,a.ST)({filterData:[...q,{9999:[...W]}],categoryId:E.id,limit:L}))},A=e=>{M((0,c.A3)([e[0],e[1]]))};(0,t.useEffect)(()=>{window.scrollTo(0,0),y(!1),S(!1),w(!1)},[Y]),(0,t.useEffect)(()=>{C||(w(!1),M((0,a.th)({categorySlug:k,limit:L})),y(!0)),I||E.slug!==k||(M((0,a.kZ)({categoryId:E.id,limit:L})),S(!0)),F(!1),w(!0)},[E,P,I,C]),(0,t.useEffect)(()=>{},[R,V]);let H=e=>{window.screen.availWidth<1024&&("hiden"===e?F(!1):"showed"===e&&F(!0))};return(0,s.jsx)(s.Fragment,{children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{title:null==E?void 0:E.title,links:[]}),(0,s.jsx)("section",{className:"catalog-single",children:(0,s.jsxs)("div",{className:"catalog-single__container _container",children:[(0,s.jsxs)("div",{className:"catalog-single__top",children:[(0,s.jsxs)("div",{className:"catalog-single__left",children:[(0,s.jsx)("h1",{children:null==E?void 0:E.title}),(0,s.jsxs)("div",{className:"catalog-single__filters",children:[(0,s.jsxs)("button",{className:"filter-title",onClick:()=>H("showed"),children:[(0,s.jsx)(r.Wj,{}),"Фильтр товаров"]}),(0,s.jsx)("div",{className:"catalog-fillters",onClick:()=>H("hiden"),style:{display:window.screen.availWidth<1024&&Z?"block":"none"},children:(0,s.jsxs)("div",{className:"catalog-fillters__box",onClick:e=>{e.stopPropagation(),H("showed")},children:[(0,s.jsx)("h4",{children:"Фильтр товаров"}),(0,s.jsx)("button",{className:"clousbtn",onClick:e=>{e.stopPropagation(),H("hiden")},children:(0,s.jsx)(r.Nn,{})}),(0,s.jsx)("div",{className:"catalog-single__filter-box",children:(0,s.jsxs)("div",{className:"catalog-single__filter-item",children:[(0,s.jsxs)("div",{className:"catalog-single__filter-title",children:[(0,s.jsx)("p",{children:"Цена (₽)"}),(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(r.K5,{color:"#FFF"})})]}),(0,s.jsx)("div",{className:"catalog-single__filter-hiden",children:(0,s.jsxs)("form",{className:"catalog-single__filter-price",ref:D,onSubmit:e=>U(e),children:[(0,s.jsxs)("label",{className:"input-text",children:["Минимум",(0,s.jsx)("input",{type:"number",min:"1",defaultValue:W[0],onInput:e=>{A([1*e.target.value,1*D.current.children[1].children[0].value])},onBlur:()=>{U()}})]}),(0,s.jsxs)("label",{className:"input-text",children:["Максимум",(0,s.jsx)("input",{type:"number",min:toString((null==D?void 0:null===(i=D.current)||void 0===i?void 0:null===(l=i.children[0])||void 0===l?void 0:l.children[0].value)*1+1),defaultValue:W[1],onInput:e=>{A([1*D.current.children[0].children[0].value,1*e.target.value])},onBlur:()=>{U()}})]}),(0,s.jsx)("input",{type:"submit"})]})})]})}),(0,s.jsxs)("div",{className:"catalog-single__filter",children:[(0,s.jsx)("button",{className:"filter-title",children:"Общяя характеристика"}),(0,s.jsxs)("div",{className:"catalog-single__filter-box",children:[B.length&&(0,s.jsx)(d,{toggleMobileFillters:F,title:"Производители",values:B,id:99999,prices:W,filterDataArray:q,setFilterDataArray:K}),null==R?void 0:R.map(e=>(0,s.jsx)(d,{toggleMobileFillters:F,title:e.title,values:e.values,id:e.id,prices:W,filterDataArray:q,setFilterDataArray:K},e.id))]})]})]})})]})]}),(0,s.jsxs)("div",{className:"catalog-single__right",children:[(0,s.jsx)("div",{className:"catalog-single__category",children:(null==P?void 0:null===(v=P.children)||void 0===v?void 0:v.length)?null==P?void 0:null===(p=P.children)||void 0===p?void 0:p.map(e=>(0,s.jsx)(x.Z,{title:e.title,img:"http://api.calcarela.com/"+e.image,id:e.id,slug:e.slug},e.id)):""}),(0,s.jsx)("div",{className:"catalog-single__sort",children:(0,s.jsxs)("select",{onChange:e=>M((0,c.Zj)(e.target.value)),children:[(0,s.jsx)("option",{value:"default",children:"По умолчанию"}),(0,s.jsx)("option",{value:"expensive",children:"Дороже"}),(0,s.jsx)("option",{value:"cheap",children:"Дешевле"}),(0,s.jsx)("option",{value:"name-asc",children:"Название (А - Я)"}),(0,s.jsx)("option",{value:"name-desc",children:"Название (Я - А)"}),(0,s.jsx)("option",{value:"model-asc",children:"Модель (А - Я)"}),(0,s.jsx)("option",{value:"model-desc",children:"Модель (Я - А)"})]})}),(0,s.jsx)("div",{className:"catalog-single__grid",children:(null==E?void 0:null===(_=E.products)||void 0===_?void 0:_.length)?null==E?void 0:E.products.map(e=>(0,s.jsx)(t.Suspense,{children:(0,s.jsx)(o.Z,{title:e.name,img:e.image&&"http://api.calcarela.com/".concat(e.image),price:e.price,salePrice:0!==e.special_price&&e.special_price,id:e.id,slug:e.slug,total:e.quantity,book:e.book})},e.id)):(0,s.jsx)(s.Fragment,{})}),L===(null==E?void 0:null===(f=E.products)||void 0===f?void 0:f.length)&&(0,s.jsx)("div",{className:"catalog-single__more",children:(0,s.jsxs)("button",{className:"show-more",onClick:()=>{var e;M((0,a.YB)({id:null==V?void 0:null===(e=V.filter(e=>e.toggle)[0])||void 0===e?void 0:e.id,filterData:[...q,{9999:[...W]}],categoryId:E.id,limit:L+30})),T(L+30)},children:[(0,s.jsx)("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M1.06189 9.7385C1.02104 9.42042 1 9.09641 1 8.76755C1 4.47765 4.58172 1 9 1C11.5006 1 13.7332 2.11394 15.2002 3.85862M15.2002 3.85862V1M15.2002 3.85862V3.91276L12.2002 3.91283M16.9381 7.79661C16.979 8.11469 17 8.4387 17 8.76755C17 13.0575 13.4183 16.5351 9 16.5351C6.61061 16.5351 4.46589 15.518 3 13.9054M3 13.9054V13.6223H6M3 13.9054V16.5351",stroke:"#333333",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Показать еще"]})})]})]}),(0,s.jsx)("div",{className:"catalog-abaut",children:(0,s.jsx)("div",{className:"catalog-abaut__flex",children:(null==E?void 0:E.description)&&(0,h.ZP)(null==E?void 0:null===(N=E.description)||void 0===N?void 0:N.replace(/<o:p>/g,"").replace(/<\/o:p>/g,""))})})]})})]}):(0,s.jsx)(u.Z,{})})},p=i(6646),_=i(564),f=i(9184);function N(){let{slug:e}=(0,m.useRouter)().query,{preOrderData:l}=(0,n.v9)(f.nR);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Suspense,{children:e&&(0,s.jsx)(v,{slug:e})}),(0,s.jsx)(p.Z,{idx:0,fetch:!0}),(0,s.jsx)(p.Z,{idx:1}),l.id&&(0,s.jsx)(_.Z,{})]})}},1163:function(e,l,i){e.exports=i(3035)}},function(e){e.O(0,[332,576,888,774,179],function(){return e(e.s=6272)}),_N_E=e.O()}]);
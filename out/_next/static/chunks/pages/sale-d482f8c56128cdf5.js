(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{4833:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sale",function(){return s(6251)}])},8232:function(e,n,s){"use strict";var l=s(5893),i=s(1664),t=s.n(i),c=s(7294);n.Z=function(e){let{title:n,links:s}=e;return(0,l.jsx)("div",{className:"brendcrumbs",children:(0,l.jsxs)("div",{className:"brendcrumbs__container _container",children:[(0,l.jsx)(t(),{href:"/",children:"Главная"}),(0,l.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})}),(null==s?void 0:s.length)?s.map((e,n)=>(0,l.jsxs)(c.Fragment,{children:[(0,l.jsx)(t(),{href:e.link,children:e.name}),(0,l.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})})]},n)):"",(0,l.jsx)("p",{children:n})]})})}},1918:function(e,n,s){"use strict";var l=s(5893),i=s(7294),t=s(5007),c=s(1664),r=s.n(c),d=s(7741),o=s(9633),u=s(9314),a=s(1935),h=s(4687),x=s(3308),m=s(9184),j=s(796),v=s(1163);n.Z=(0,i.memo)(function(e){let{title:n,img:s,price:c,salePrice:p,id:g,slug:_,total:f,book:k}=e,b=(0,t.I0)(),N=(0,i.useRef)(null),[w,C]=(0,i.useState)(!1),L=(0,v.useRouter)(),{loginData:I}=(0,t.v9)(o.YN),{uuId:F}=(0,t.v9)(x.aQ),{guestUserId:T}=(0,t.v9)(j.KY),E=(0,i.useCallback)(()=>{b((0,d.HC)({productCount:"1",productId:g,userToken:I.access_token?I.access_token:null,guestUserId:T})),C(!0),setTimeout(()=>{C(!1)},1e3)},[T]),Z=(0,i.useCallback)(()=>{b((0,a.Dq)({userToken:I.access_token,productId:g,guestUserId:!!F&&F})),C(!0),setTimeout(()=>{C(!1)},1e3),console.log(f>k.length)},[F]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"product-item",children:[(0,l.jsxs)(r(),{href:"/product/".concat(_),style:{backgroundImage:s&&"url("+s+")"},className:"product-item__img",onClick:()=>{b((0,u.Rc)({slug:_}))},scroll:!1,children:[p>0&&(0,l.jsxs)("div",{className:"discount_div",children:["- ",100-100*p/c," %"]}),(0,l.jsx)("img",{src:s,alt:n})]}),(0,l.jsxs)("div",{className:"product-item__text",children:[(0,l.jsx)("h4",{children:(0,l.jsx)(r(),{href:"/product/".concat(_),onClick:()=>{b((0,u.Rc)({slug:_}))},scroll:!1,title:n,children:n})}),(0,l.jsx)("div",{className:"product-item__prices",children:p?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:[p," ₽"]}),(0,l.jsxs)("span",{children:[c," ₽"]})]}):(0,l.jsxs)("p",{children:[c," ₽"]})}),(0,l.jsx)(r(),{href:"/",className:"credit-btn",children:"Оформить кредит в магазине!"}),(0,l.jsxs)("div",{className:"product-item__buttons",children:[(0,l.jsx)("button",{onClick:E,className:"buy-btn",disabled:(null==k?void 0:k.length)>=f,style:{maxWidth:(null==k?void 0:k.length)>=f&&"unset",backgroundColor:(null==k?void 0:k.length)>=f&&"#939393"},children:(null==k?void 0:k.length)>=f?"Забронировано":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.wh,{color:"#FFF"}),"Купить",w&&(0,l.jsx)("span",{className:"product-item__animate",ref:N,children:"1"})]})}),"/liked"!==L.pathname?(0,l.jsx)("button",{className:"like-btn",onClick:Z,children:(0,l.jsx)(h.lM,{})}):(0,l.jsx)("button",{className:"like-btn",onClick:()=>{b((0,a.ns)({userToken:I.access_token,productId:g,guestUserId:F}))},children:(0,l.jsx)(h.yl,{})}),(null==k?void 0:k.length)>=f?"":(0,l.jsx)("button",{className:"preorder-btn",onClick:()=>{I.access_token?b((0,m.gW)({id:g,price:p||c,name:n,toggle:!0})):L.push("/login")},children:(0,l.jsx)(h.fC,{})})]})]})]})})})},6251:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return a}});var l=s(5893),i=s(7294);s(4276);var t=s(1918),c=s(5007),r=s(1704),d=s(1753),o=function(e){var n,s;let{fetch:o,idx:u}=e,{getTags:a,tagsData:h}=(0,c.v9)(r.a0),x=(0,c.I0)();return(0,i.useLayoutEffect)(()=>{a||(null==h?void 0:h.length)||(x((0,r.Y8)()),x((0,d.$)({limit:20,fetch:o})))},[h]),(0,l.jsx)("section",{className:"sale",children:(0,l.jsxs)("div",{className:"sale__container _container",children:[(0,l.jsx)("h1",{children:null===(n=h[u])||void 0===n?void 0:n.title}),(0,l.jsx)("div",{className:"sale__grid",children:null===(s=h[u])||void 0===s?void 0:s.products.map(e=>(0,l.jsx)(t.Z,{title:(null==e?void 0:e.title)&&e.title,img:"https://back.brend-instrument.ru"+(null==e?void 0:e.image),price:null==e?void 0:e.price,salePrice:(null==e?void 0:e.special_price)!==0&&(null==e?void 0:e.special_price),id:null==e?void 0:e.id,slug:e.slug},null==e?void 0:e.id))})]})})},u=s(8232);function a(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{title:"Акции"}),(0,l.jsx)(o,{fetch:!0,idx:0})]})}},4276:function(){},1163:function(e,n,s){e.exports=s(3035)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4833)}),_N_E=e.O()}]);
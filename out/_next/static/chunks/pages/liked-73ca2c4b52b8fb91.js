(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{4285:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liked",function(){return n(3579)}])},8232:function(e,s,n){"use strict";var t=n(5893),c=n(1664),i=n.n(c),l=n(7294);s.Z=function(e){let{title:s,links:n}=e;return(0,t.jsx)("div",{className:"brendcrumbs",children:(0,t.jsxs)("div",{className:"brendcrumbs__container _container",children:[(0,t.jsx)(i(),{href:"/",children:"Главная"}),(0,t.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})}),(null==n?void 0:n.length)?n.map((e,s)=>(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)(i(),{href:e.link,children:e.name}),(0,t.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})})]},s)):"",(0,t.jsx)("p",{children:s})]})})}},1449:function(e,s,n){"use strict";var t=n(5893);n(7294),s.Z=function(){return(0,t.jsxs)("div",{className:"load-screen",id:"load-screen",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})}},564:function(e,s,n){"use strict";var t=n(5893),c=n(9184),i=n(9633),l=n(4687),r=n(7066),a=n(7294),d=n(5007);s.Z=function(){let{loginData:e}=(0,d.v9)(i.YN),[s,n]=(0,a.useState)("Забронируйте инструмент заранее, и мы отложим их специально для вас! Бронь будет действительна в течение 24 часов."),[o,u]=(0,a.useState)(!0),{preOrderData:h}=(0,d.v9)(c.nR),x=(0,d.I0)();return(0,a.useEffect)(()=>{},[h]),(0,t.jsx)("div",{className:"preorder-modal",children:(0,t.jsxs)("div",{className:"preorder-modal__container",children:[(0,t.jsxs)("div",{className:"preorder-modal__title",children:[(0,t.jsx)("h2",{children:"Забронировать"}),(0,t.jsx)("button",{onClick:()=>x((0,c.gW)()),children:(0,t.jsx)(l.Nn,{})})]}),(0,t.jsxs)("div",{className:"preorder-modal__body",children:[(0,t.jsx)("p",{children:s}),(0,t.jsx)("button",{onClick:()=>{o?r.Z.post("http://api.calcarela.com/api/auth/pre-order/".concat(h.id),{},{headers:{Authorization:"Bearer "+e.access_token}}).then(e=>{200===e.status&&(n("Спасибо! Ваша заявка принята, скоро мы с Вами свяжемся!"),u(!1),setTimeout(()=>{x((0,c.gW)())},5e3))}):x((0,c.gW)())},children:o?"Забронировать":"Закрыть"})]})]})})}},1918:function(e,s,n){"use strict";var t=n(5893),c=n(7294),i=n(5007),l=n(1664),r=n.n(l),a=n(7741),d=n(9633),o=n(9314),u=n(1935),h=n(4687),x=n(3308),j=n(9184),m=n(796),p=n(1163);s.Z=(0,c.memo)(function(e){let{title:s,img:n,price:l,salePrice:_,id:g,slug:v,total:f,book:k}=e,N=(0,i.I0)(),b=(0,c.useRef)(null),[w,C]=(0,c.useState)(!1),L=(0,p.useRouter)(),{loginData:I}=(0,i.v9)(d.YN),{uuId:Z}=(0,i.v9)(x.aQ),{guestUserId:F}=(0,i.v9)(m.KY),T=(0,c.useCallback)(()=>{N((0,a.HC)({productCount:"1",productId:g,userToken:I.access_token?I.access_token:null,guestUserId:F})),C(!0),setTimeout(()=>{C(!1)},1e3)},[F]),E=(0,c.useCallback)(()=>{N((0,u.Dq)({userToken:I.access_token,productId:g,guestUserId:!!Z&&Z})),C(!0),setTimeout(()=>{C(!1)},1e3),console.log(f>k.length)},[Z]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"product-item",children:[(0,t.jsxs)(r(),{href:"/product/".concat(v),style:{backgroundImage:n&&"url("+n+")"},className:"product-item__img",onClick:()=>{N((0,o.Rc)({slug:v}))},scroll:!1,children:[_>0&&(0,t.jsxs)("div",{className:"discount_div",children:["- ",100-100*_/l," %"]}),(0,t.jsx)("img",{src:n,alt:s})]}),(0,t.jsxs)("div",{className:"product-item__text",children:[(0,t.jsx)("h4",{children:(0,t.jsx)(r(),{href:"/product/".concat(v),onClick:()=>{N((0,o.Rc)({slug:v}))},scroll:!1,title:s,children:s})}),(0,t.jsx)("div",{className:"product-item__prices",children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:[_," ₽"]}),(0,t.jsxs)("span",{children:[l," ₽"]})]}):(0,t.jsxs)("p",{children:[l," ₽"]})}),(0,t.jsx)(r(),{href:"/",className:"credit-btn",children:"Оформить кредит в магазине!"}),(0,t.jsxs)("div",{className:"product-item__buttons",children:[(0,t.jsx)("button",{onClick:T,className:"buy-btn",disabled:(null==k?void 0:k.length)>=f,style:{maxWidth:(null==k?void 0:k.length)>=f&&"unset",backgroundColor:(null==k?void 0:k.length)>=f&&"#939393"},children:(null==k?void 0:k.length)>=f?"Забронировано":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.wh,{color:"#FFF"}),"Купить",w&&(0,t.jsx)("span",{className:"product-item__animate",ref:b,children:"1"})]})}),"/liked"!==L.pathname?(0,t.jsx)("button",{className:"like-btn",onClick:E,children:(0,t.jsx)(h.lM,{})}):(0,t.jsx)("button",{className:"like-btn",onClick:()=>{N((0,u.ns)({userToken:I.access_token,productId:g,guestUserId:Z}))},children:(0,t.jsx)(h.yl,{})}),(null==k?void 0:k.length)>=f?"":(0,t.jsx)("button",{className:"preorder-btn",onClick:()=>{I.access_token?N((0,j.gW)({id:g,price:_||l,name:s,toggle:!0})):L.push("/login")},children:(0,t.jsx)(h.fC,{})})]})]})]})})})},3579:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return g}});var t=n(5893),c=n(564),i=n(8232),l=n(7294),r=n(1918),a=n(5007),d=n(3308),o=n(1935),u=n(1449),h=n(9633),x=n(4687),j=n(1664),m=n.n(j),p=function(){let e=(0,a.I0)(),{likedData:s,uuId:n}=(0,a.v9)(d.aQ),[c,i]=(0,l.useState)(!1),[j,p]=(0,l.useState)(!1),{loginData:_}=(0,a.v9)(h.YN);return(0,l.useEffect)(()=>{j||(e((0,o.J7)({userToken:_.access_token,guestUserId:n})),p(!0),i(!0))},[s]),(0,l.useEffect)(()=>{},[j]),(0,t.jsx)(t.Fragment,{children:c?(0,t.jsx)("section",{className:"liked",children:(0,t.jsxs)("div",{className:"liked__container _container",children:[(0,t.jsx)("h1",{children:"Избранное"}),s.length?(0,t.jsx)("div",{className:"liked__grid",children:null==s?void 0:s.map(e=>(0,t.jsx)(r.Z,{title:e.name,img:e.attributes.image&&"http://api.calcarela.com/".concat(e.attributes.image),price:e.price,salePrice:0!==e.special_price&&e.special_price,id:e.id,slug:e.attributes.slug},e.id))}):(0,t.jsxs)("div",{className:"liked__empty",children:[(0,t.jsx)("p",{children:"Раздел Избранное все еще пуст."}),(0,t.jsxs)("p",{children:["Нажмите на ",(0,t.jsx)(x.lM,{})," чтобы добавить товар в избранное."]}),(0,t.jsxs)(m(),{href:"/",children:[" ",(0,t.jsx)(x.Bc,{})," Вернуться в магазин"]})]})]})}):(0,t.jsx)(u.Z,{})})},_=n(9184);function g(){let{preOrderData:e}=(0,a.v9)(_.nR);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{title:"Избранное"}),(0,t.jsx)(p,{}),e.id&&(0,t.jsx)(c.Z,{})]})}},1163:function(e,s,n){e.exports=n(3035)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4285)}),_N_E=e.O()}]);
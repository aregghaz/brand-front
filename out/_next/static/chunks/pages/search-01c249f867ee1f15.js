(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2774:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(7404)}])},8232:function(e,s,n){"use strict";var l=n(5893),t=n(1664),c=n.n(t),i=n(7294);s.Z=function(e){let{title:s,links:n}=e;return(0,l.jsx)("div",{className:"brendcrumbs",children:(0,l.jsxs)("div",{className:"brendcrumbs__container _container",children:[(0,l.jsx)(c(),{href:"/",children:"Главная"}),(0,l.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})}),(null==n?void 0:n.length)?n.map((e,s)=>(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(c(),{href:e.link,children:e.name}),(0,l.jsx)("svg",{width:6,height:10,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M-5.13609e-08 1.175L3.7085 5L-3.85753e-07 8.825L1.1417 10L6 5L1.1417 -2.12363e-07L-5.13609e-08 1.175Z",fill:"#333333"})})]},s)):"",(0,l.jsx)("p",{children:s})]})})}},1918:function(e,s,n){"use strict";var l=n(5893),t=n(7294),c=n(5007),i=n(1664),r=n.n(i),a=n(7741),u=n(9633),d=n(9314),o=n(1935),h=n(4687),m=n(3308),x=n(9184),p=n(796),j=n(1163);s.Z=(0,t.memo)(function(e){let{title:s,img:n,price:i,salePrice:g,id:_,slug:f,total:v,book:N}=e,b=(0,c.I0)(),k=(0,t.useRef)(null),[w,C]=(0,t.useState)(!1),L=(0,j.useRouter)(),{loginData:I}=(0,c.v9)(u.YN),{uuId:F}=(0,c.v9)(m.aQ),{guestUserId:T}=(0,c.v9)(p.KY),y=(0,t.useCallback)(()=>{b((0,a.HC)({productCount:"1",productId:_,userToken:I.access_token?I.access_token:null,guestUserId:T})),C(!0),setTimeout(()=>{C(!1)},1e3)},[T]),E=(0,t.useCallback)(()=>{b((0,o.Dq)({userToken:I.access_token,productId:_,guestUserId:!!F&&F})),C(!0),setTimeout(()=>{C(!1)},1e3),console.log(v>N.length)},[F]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"product-item",children:[(0,l.jsxs)(r(),{href:"/product/".concat(f),style:{backgroundImage:n&&"url("+n+")"},className:"product-item__img",onClick:()=>{b((0,d.Rc)({slug:f}))},scroll:!1,children:[g>0&&(0,l.jsxs)("div",{className:"discount_div",children:["- ",100-100*g/i," %"]}),(0,l.jsx)("img",{src:n,alt:s})]}),(0,l.jsxs)("div",{className:"product-item__text",children:[(0,l.jsx)("h4",{children:(0,l.jsx)(r(),{href:"/product/".concat(f),onClick:()=>{b((0,d.Rc)({slug:f}))},scroll:!1,title:s,children:s})}),(0,l.jsx)("div",{className:"product-item__prices",children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:[g," ₽"]}),(0,l.jsxs)("span",{children:[i," ₽"]})]}):(0,l.jsxs)("p",{children:[i," ₽"]})}),(0,l.jsx)(r(),{href:"/",className:"credit-btn",children:"Оформить кредит в магазине!"}),(0,l.jsxs)("div",{className:"product-item__buttons",children:[(0,l.jsx)("button",{onClick:y,className:"buy-btn",disabled:(null==N?void 0:N.length)>=v,style:{maxWidth:(null==N?void 0:N.length)>=v&&"unset",backgroundColor:(null==N?void 0:N.length)>=v&&"#939393"},children:(null==N?void 0:N.length)>=v?"Забронировано":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.wh,{color:"#FFF"}),"Купить",w&&(0,l.jsx)("span",{className:"product-item__animate",ref:k,children:"1"})]})}),"/liked"!==L.pathname?(0,l.jsx)("button",{className:"like-btn",onClick:E,children:(0,l.jsx)(h.lM,{})}):(0,l.jsx)("button",{className:"like-btn",onClick:()=>{b((0,o.ns)({userToken:I.access_token,productId:_,guestUserId:F}))},children:(0,l.jsx)(h.yl,{})}),(null==N?void 0:N.length)>=v?"":(0,l.jsx)("button",{className:"preorder-btn",onClick:()=>{I.access_token?b((0,x.gW)({id:_,price:g||i,name:s,toggle:!0})):L.push("/login")},children:(0,l.jsx)(h.fC,{})})]})]})]})})})},7404:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return o}});var l=n(5893),t=n(8232),c=n(7294),i=n(1918),r=n(5007),a=n(8437),u=n(7908),d=function(){let e=(0,r.I0)(),s=(0,c.useRef)(null),{searchProductsData:n,searchValue:t}=(0,r.v9)(a.CG),d=n=>{n.preventDefault(),e((0,u.o)({value:s.current[0].value})),e((0,a.Cz)(s.current[0].value))};return(0,c.useEffect)(()=>{},[n]),(0,l.jsx)("section",{className:"search-page",children:(0,l.jsxs)("div",{className:"search-page__container _container",children:[(0,l.jsxs)("h1",{children:["Поиск - ",t]}),(0,l.jsxs)("form",{className:"search-page__form",ref:s,onSubmit:d,children:[(0,l.jsx)("label",{className:"input-text",children:(0,l.jsx)("input",{type:"text",placeholder:"Поиск по товарам...",className:"input",defaultValue:t,onInput:e=>{d(e)}})}),(0,l.jsx)("label",{className:"input-btn",children:(0,l.jsx)("input",{type:"submit",value:"Поиск",className:"input"})})]}),(0,l.jsx)("div",{className:"search-page__grid",children:null==n?void 0:n.map(e=>(0,l.jsx)(i.Z,{title:e.title,img:e.image&&"http://api.calcarela.com/".concat(e.image),price:e.price,salePrice:0!==e.special_price&&e.special_price,id:e.id,slug:e.slug}))})]})})};function o(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.Z,{title:"Поиск"}),(0,l.jsx)(d,{})]})}},1163:function(e,s,n){e.exports=n(3035)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2774)}),_N_E=e.O()}]);